<!DOCTYPE html>
<html>
<head>
  <title>Example HTML Page</title>
  <style>
    /* Style for the table */
    table {
      border-collapse: collapse;
      width:70%;
      table-layout: fixed;
    }
    td, th {
      border: 1px solid black;
      text-align: center;
      justify-content: center;
      padding: 10px;
      align-items: center;
    }
    th {
      background-color: #CCCCCC;
    }
    td.highlight {
      background-color: yellow;
    }
        
  </style>
  <script>
    // Function to fetch the JSON data from the provided file
    async function fetchData() {
      const response = await fetch('data.json');
      const data = await response.json();
      return data;
    }

    // Function to create the table rows for the "tweedegraad" and "derdegraad" objects
    function createRows(data, target) {
      const table = document.querySelector(target);
      const rows = data.map((item) => {
        const row = document.createElement('tr');
        const cell = document.createElement('td');
        cell.textContent = item.naam;
        cell.addEventListener('mouseover', () => {
          highlightDerdegraad(data, item);
          cell.classList.add('highlight');
        });
        cell.addEventListener('mouseout', () => {
          highlightDerdegraad(data, item);
          cell.classList.remove('highlight');
        });
        row.appendChild(cell);
        return row;
      });
      table.append(...rows);
    }

    // Function to highlight the corresponding "doorstroom" value in the "derdegraad" column
    function highlightDerdegraad(data, tweedegraadItem) {
      const derdegraadTable = document.querySelector('#derdegraad');
      derdegraadTable.querySelectorAll('td').forEach((cell) => {
        cell.classList.remove('highlight');
        if (cell.textContent === tweedegraadItem.doorstroom) {
          cell.classList.add('highlight');
        }
        if (cell.textContent === tweedegraadItem.doorstroom2) {
          cell.classList.add('highlight');
        }
      });
    }

    // Main function to initialize the page and fetch the data
    async function init() {
      const data = await fetchData();
      createRows(data.tweedegraad, '#tweedegraad');
      createRows(data.derdegraad, '#derdegraad');
    }

    // Call the main function when the page has finished loading
    window.addEventListener('load', init);
  </script>
</head>
<body>
  <h1>Example HTML Page</h1>
  <table>
    <thead>
      <tr>
        <th>Tweedegraad</th>
        <th>Derdegraad</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <table id="tweedegraad">
            <thead>
              <tr>
                <th>Naam</th>
              </tr>
            </thead>
          </table>
        </td>
        <td>
          <table id="derdegraad">
            <thead>
              <tr>
                <th>Naam</th>
              </tr>
            </thead>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
</body>
</html>
